style = list(
# cell_fill(color = "#fadadd"),
cell_text(weight = "bold"),
cell_fill(color = "lightgrey")
),
locations = cells_body(rows = last_whack[1],
columns = last_whack[2])
) %>%
{reduce(adj_params, apply_adj_style, .init = .)}
out
rm(list = ls())
document()
load_all()
play(6)
load_all()
play(7)
document
document()
load_all()
devtools::check()
document
document()
load_all()
check()
use_gpl3_license()
document()
load_all()
document()
load_all()
check()
?utils::globalVariables()
utils::globalVariables(".")
devtools::check()
document()
load_all()
play(15)
document()
load_all()
play(13)
n <- 13
theta = .8
turn_time = 1
cat("#########################################", "\n")
cat("# ------ Let's play Whack-A-Mole! ----- #", "\n")
cat("#########################################", "\n")
Sys.sleep(turn_time)
# make sure n is an integer
if (!is.integer(n)) {
new_n <- as.integer(n)
cat(glue("# ---- `n` squashed from {n} to {new_n}"), "\n")
# just needed `new_n` for messaging, can go back to normal n name now
n <- new_n
}
# initialize a random matrix 4x4 matrix of zeros and 1s
board <- sample(c(0, 1), n*n, replace = TRUE, prob = c(1 - theta, theta)) %>%
matrix(nrow = n, ncol = n) %>%
constructor_board()
moves <- 0
board
cat("# ------ Initial board ----- #", "\n")
print(board)
size <- sum(board)
cat(glue("# ------ # moles left: {size} ------ #"), "\n")
# trivially see if it's solved, if not continue
board_is_solved <- is_solved(board)
Sys.sleep(turn_time)
# Initially, whack with strong preference for radial top left
radial <- radial_top_left(board)
radial
global <- density_global(board)
global
weight <- .9 * radial + .1 * global
weight
hit <- weight %>% which.max() %>% arrayInd(c(n, n)) # get location of highest weighted mole
hit
board <- whack(board, hit[1], hit[2]) # whack the mole
Sys.sleep(turn_time)
board_is_solved <- is_solved(board) # check if we've solved
moves <- moves + 1 # add a move
board_is_solved
board
radial <- radial_top_left(board)
local_2 <- density_local(board, i = hit[1], j = hit[2], degree = 2)
global <- density_global(board)
radial
local_2
global
local
local_2
global
local_2
radial
weight <- .3 * radial + .5 * local_2 + .2 * global
weight
hit <- weight %>% which.max() %>% arrayInd(c(n, n)) # get location of first, largest subspace
hit
board
local_2
load_all()
play(14)
weight
hit <- weight %>% which.max() %>% arrayInd(c(n, n)) # get location of first, largest subspace
hit
board <- whack(board, hit[1], hit[2])
Sys.sleep(turn_time)
board_is_solved <- is_solved(board)
moves <- moves + 1
radial <- radial_top_left(board)
local_2 <- density_local(board, i = hit[1], j = hit[2], degree = 2)
global <- density_global(board)
weight <- .3 * radial + .5 * local_2 + .2 * global
hit <- weight %>% which.max() %>% arrayInd(c(n, n)) # get location of first, largest subspace
board <- whack(board, hit[1], hit[2])
weight
radial
local_2
document
document()
load_all()
play(14)
document()
load_all()
play(14)
document()
load_all()
play()
play14
play(14)
?tab_source_note
document()
load_all()
play(14)
board
load_all()
document()
load_all()
mole_locations(board)
trial <- mole_locations(board)
View(trial)
list(c(1,2), c(2,1))
c(list(), c(1,1))
list(list(), c(1,1))
load_all()
mole_locations(board)
load_all()
mole_locations(board)
load_all()
mole_locations(board)
load_all()
mole_locations(board)
?unlist
load_all()
mole_locations(board)
mole_locs <- mole_locations(board)
mole_locs
document()
load_all()
play(14)
board
mole_locations(board)
load_all()
board
play(14)
n <- dim(board)[1]
last_whack <- attr(board, "last_whack")
num_moles <- attr(board, "num_moles")
num_moles
board
last_whack <- attr(board, "last_whack")
last_whack
num_moles <- attr(board, "num_moles")
num_moles
n <- 14
pref_radial = .1
pref_local = (1 - pref_radial/2)
pref_global = (1 - pref_radial/2)
cat("#########################################", "\n")
cat("# ------ Let's play Whack-A-Mole! ----- #", "\n")
cat("#########################################", "\n")
Sys.sleep(turn_time)
# make sure n is an integer
if (!is.integer(n)) {
new_n <- as.integer(n)
cat(glue("# ---- `n` squashed from {n} to {new_n}"), "\n")
# just needed `new_n` for messaging, can go back to normal n name now
n <- new_n
}
# initialize a random matrix 4x4 matrix of zeros and 1s
board <- sample(c(0, 1), n*n, replace = TRUE, prob = c(1 - theta, theta)) %>%
matrix(nrow = n, ncol = n) %>%
constructor_board()
board
moves <- 0
cat("# ------ Initial board ----- #", "\n")
print(board)
size <- sum(board)
size
cat(glue("# ------ # moles left: {size} ------ #"), "\n")
# trivially see if it's solved, if not continue
board_is_solved <- is_solved(board)
Sys.sleep(turn_time)
# Initially, whack with strong preference for radial top left
radial <- radial_top_left(board)
global <- density_global(board)
weight <- .9 * radial + .1 * global
weight
hit <- weight %>% which.max() %>% arrayInd(c(n, n)) # get location of highest weighted mole
hit
board <- whack(board, hit[1], hit[2]) # whack the mole
Sys.sleep(turn_time)
board_is_solved <- is_solved(board) # check if we've solved
moves <- moves + 1 # add a move
radial <- radial_top_left(board)
local_2 <- density_local(board, i = hit[1], j = hit[2], degree = 2)
global <- density_global(board)
weight <- pref_radial * radial + pref_local * local_2 + pref_global * global
hit <- weight %>% which.max() %>% arrayInd(c(n, n)) # get location of first, largest subspace
board <- whack(board, hit[1], hit[2])
Sys.sleep(turn_time)
board_is_solved <- is_solved(board)
moves <- moves + 1
radial <- radial_top_left(board)
local_2 <- density_local(board, i = hit[1], j = hit[2], degree = 2)
global <- density_global(board)
weight <- pref_radial * radial + pref_local * local_2 + pref_global * global
hit <- weight %>% which.max() %>% arrayInd(c(n, n)) # get location of first, largest subspace
board <- whack(board, hit[1], hit[2])
Sys.sleep(turn_time)
board_is_solved <- is_solved(board)
moves <- moves + 1
rm(list = ls())
play(14)
n = 3
theta = .8
turn_time = 1
pref_radial = .1
pref_local = (1 - pref_radial/2)
pref_global = (1 - pref_radial/2)
# make sure n is an integer
if (!is.integer(n)) {
new_n <- as.integer(n)
cat(glue("# ---- `n` squashed from {n} to {new_n}"), "\n")
# just needed `new_n` for messaging, can go back to normal n name now
n <- new_n
}
# initialize a random matrix 4x4 matrix of zeros and 1s
board <- sample(c(0, 1), n*n, replace = TRUE, prob = c(1 - theta, theta)) %>%
matrix(nrow = n, ncol = n) %>%
constructor_board()
board
rlang::last_trace()
rlang::last_trace(drop = FALSE)
attributes(board)
n <- dim(board)[1]
last_whack <- attr(board, "last_whack")
num_moles <- attr(board, "num_moles")
last_whack <- attr(board, "last_whack")
last_whack
num_moles <- attr(board, "num_moles")
num_moles
mole_locs <- mole_locations(board)
mole_loc_params <- map(
mole_locs,
function(z) {
list(row = z["row"],
column = z["col"])
})
apply_mole_loc_borders <- function(g, args) {
g %>%
tab_style(
style = cell_borders(
sides = "all",
color = "grey",
weight = px(1)
),
locations = cells_body(rows = args$row,
columns = args$column))
}
# generic output
out <- board %>%
# noquote() %>% # at this point, it's a matrix
as.data.frame() %>%
gt() %>%
tab_header(title = "Whack-A-Mole") %>%
tab_options(column_labels.hidden = TRUE,
table.width = pct(60)) %>%
cols_align(align = "center") %>%
tab_source_note(glue("Number of moles left: {num_moles}")) %>%
{reduce(mole_loc_params, apply_mole_loc_borders, .init = .)}
out
out %>% attributes()
mole_locations(board)
load_all()
document()
load_all()
play(15)
document()
load_all()
play(15)
board
n <- dim(board)[1]
last_whack <- attr(board, "last_whack")
num_moles <- attr(board, "num_moles")
mole_locs <- mole_locations(board)
mole_loc_params <- map(
mole_locs,
function(z) {
list(row = z[1],
column = z[2])
})
apply_mole_loc_borders <- function(g, args) {
g %>%
tab_style(
style = cell_borders(
sides = "all",
color = "grey",
weight = px(1)
),
locations = cells_body(rows = args$row,
columns = args$column))
}
# generic output
out <- board %>%
# noquote() %>% # at this point, it's a matrix
as.data.frame() %>%
gt() %>%
tab_header(title = "Whack-A-Mole") %>%
tab_options(column_labels.hidden = TRUE,
table.width = pct(60)) %>%
cols_align(align = "center") %>%
tab_source_note(glue("Number of moles left: {num_moles}")) %>%
{reduce(mole_loc_params, apply_mole_loc_borders, .init = .)}
out
board %>%
# noquote() %>% # at this point, it's a matrix
as.data.frame() %>%
gt() %>%
tab_header(title = "Whack-A-Mole") %>%
tab_options(column_labels.hidden = TRUE,
table.width = pct(60)) %>%
cols_align(align = "center") %>%
tab_source_note(glue("Number of moles left: {num_moles}"))
?cells_body
mole_locs <- mole_locations(board)
mole_locs
mole_loc_params <- map(
mole_locs,
function(z) {
list(row = z[1],
column = z[2])
})
mole_loc_params
apply_mole_loc_borders <- function(g, args) {
g %>%
tab_style(
style = cell_borders(
sides = "all",
color = "grey",
weight = px(1)
),
locations = cells_body(rows = args$row,
columns = args$column))
}
apply_mole_loc_borders
board %>%
# noquote() %>% # at this point, it's a matrix
as.data.frame() %>%
gt() %>%
tab_header(title = "Whack-A-Mole") %>%
tab_options(column_labels.hidden = TRUE,
table.width = pct(60)) %>%
cols_align(align = "center") %>%
tab_source_note(glue("Number of moles left: {num_moles}"))
board %>%
# noquote() %>% # at this point, it's a matrix
as.data.frame() %>%
gt() %>%
tab_header(title = "Whack-A-Mole") %>%
tab_options(column_labels.hidden = TRUE,
table.width = pct(60)) %>%
cols_align(align = "center") %>%
tab_source_note(glue("Number of moles left: {num_moles}")) %>%
{reduce(mole_loc_params, apply_mole_loc_borders, .init = .)}
n <- dim(board)[1]
last_whack <- attr(board, "last_whack")
num_moles <- attr(board, "num_moles")
mole_locs <- mole_locations(board)
mole_loc_params <- map(
mole_locs,
function(z) {
list(row = z[1],
column = z[2])
}) %>%
.[1]
apply_mole_loc_borders <- function(g, args) {
g %>%
tab_style(
style = cell_borders(
sides = "all",
color = "grey",
weight = px(1)
),
locations = cells_body(rows = args$row,
columns = args$column))
}
# generic output
out <- board %>%
# noquote() %>% # at this point, it's a matrix
as.data.frame() %>%
gt() %>%
tab_header(title = "Whack-A-Mole") %>%
tab_options(column_labels.hidden = TRUE,
table.width = pct(60)) %>%
cols_align(align = "center") %>%
tab_source_note(glue("Number of moles left: {num_moles}")) %>%
{reduce(mole_loc_params, apply_mole_loc_borders, .init = .)}
out
mole_loc_params
mole_loc_params
mole_loc_params %>% pluck(1)
mole_loc_params %>% pluck(1) %>% .@row
mole_loc_params %>% pluck(1) %>% .$row
mole_loc_params %>% pluck(1) %>% .$column
mole_loc_params
mole_loc_params <- map(
mole_locs,
function(z) {
list(z)
})
mole_loc_params
mole_locs
mole_loc_params
mole_loc_params
mole_locs <- mole_locations(board)
mole_locs
mole_locs <- mole_locations(board)
# mole_loc_params <- map(
#   mole_locs,
#   function(z) {
#
#     list(z)
#     })
apply_mole_loc_borders <- function(g, args) {
g %>%
tab_style(
style = cell_borders(sides = "all",
color = "grey",
weight = px(1)),
locations = cells_body(rows = args$row,
columns = args$col))
}
# generic output
out <- board %>%
# noquote() %>% # at this point, it's a matrix
as.data.frame() %>%
gt() %>%
tab_header(title = "Whack-A-Mole") %>%
tab_options(column_labels.hidden = TRUE,
table.width = pct(60)) %>%
cols_align(align = "center") %>%
tab_source_note(glue("Number of moles left: {num_moles}")) %>%
{reduce(mole_locs, apply_mole_loc_borders, .init = .)}
# mole_loc_params <- map(
#   mole_locs,
#   function(z) {
#
#     list(z)
#     })
apply_mole_loc_borders <- function(g, args) {
g %>%
tab_style(
style = cell_borders(sides = "all",
color = "grey",
weight = px(1)),
locations = cells_body(rows = args[["row"]],
columns = args[["col"]]))
}
# generic output
out <- board %>%
# noquote() %>% # at this point, it's a matrix
as.data.frame() %>%
gt() %>%
tab_header(title = "Whack-A-Mole") %>%
tab_options(column_labels.hidden = TRUE,
table.width = pct(60)) %>%
cols_align(align = "center") %>%
tab_source_note(glue("Number of moles left: {num_moles}")) %>%
{reduce(mole_locs, apply_mole_loc_borders, .init = .)}
out
rm(list= ls())
play(14)
play(14)
document()
load_all()
play(15)
load_all()
play(15)
load_all()
document()
load_all()
document()
load_all()
play(15)
play(5)
play(6)
play(7)
document()
load_all()
check()
?px
document()
load_all()
